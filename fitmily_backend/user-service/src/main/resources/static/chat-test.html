<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>STOMP WebSocket í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h2>STOMP WebSocket ì—°ê²° í…ŒìŠ¤íŠ¸</h2>

<label for="token">JWT í† í° ì…ë ¥:</label><br>
<input type="text" id="token" size="100" placeholder="Bearer ì—†ì´ í† í°ë§Œ ì…ë ¥"><br><br>

<button onclick="connect()">ğŸ”Œ STOMP ì—°ê²°í•˜ê¸°</button>

<script>
    let stompClient;

    function connect() {
        const token = document.getElementById("token").value.trim();
        if (!token) {
            alert("JWT í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
        }

        const socket = new SockJS("http://localhost:8080/api/ws-connect");
        stompClient = Stomp.over(socket);

        stompClient.connect(
            {
                Authorization: "Bearer " + token
            },
            function (frame) {
                console.log(" STOMP ì—°ê²° ì„±ê³µ", frame);

            },
            function (error) {
                console.error(" STOMP ì—°ê²° ì‹¤íŒ¨", error);

            }
        );
    }
</script>
</body>
</html>
