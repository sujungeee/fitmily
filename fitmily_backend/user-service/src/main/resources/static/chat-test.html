<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>STOMP WebSocket 테스트</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h2>STOMP WebSocket 연결 테스트</h2>

<label for="token">JWT 토큰 입력:</label><br>
<input type="text" id="token" size="100" placeholder="Bearer 없이 토큰만 입력"><br><br>

<button onclick="connect()">🔌 STOMP 연결하기</button>

<script>
    let stompClient;

    function connect() {
        const token = document.getElementById("token").value.trim();
        if (!token) {
            alert("JWT 토큰을 입력하세요.");
            return;
        }

        const socket = new SockJS("http://localhost:8080/api/ws-connect");
        stompClient = Stomp.over(socket);

        stompClient.connect(
            {
                Authorization: "Bearer " + token
            },
            function (frame) {
                console.log(" STOMP 연결 성공", frame);

            },
            function (error) {
                console.error(" STOMP 연결 실패", error);

            }
        );
    }
</script>
</body>
</html>
